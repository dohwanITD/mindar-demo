<!--
 Basic example
-->
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/16/Stats.min.js"></script>
    <script src="../../../../../dist/mindar-image-aframe-1280.prod.js" type="module"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.1/howler.min.js"></script> <!-- Audio -->
    <script src="https://unpkg.com/aframe-slice9-component/dist/aframe-slice9-component.min.js"></script> <!-- tooltip -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras/dist/aframe-extras.min.js"></script> <!-- animation-mixer -->

      <!-- stylesheet / css -->
    <link rel="stylesheet" type="text/css" href="./src/subtitle.css">

    <!-- 모듈로 받아올 것 -->
    <!-- <script type="module" src='./src/aframe-gif-shader.js'></script> -->
    <script type='text/javascript' src='./src/step-ctrl.js'></script>

    <script>
      AFRAME.registerComponent('cloak', {
         init: function() {
           let geometry = new THREE.BoxGeometry(1, 1, 1)
          //  geometry.faces.splice(4, 2)
            let material = new THREE.MeshBasicMaterial({
               colorWrite: false
            })
            let mesh = new THREE.Mesh(geometry, material)
            mesh.scale.set(1.1, 1.1, 1.1)
            this.el.object3D.add(mesh)
         }
      })
    </script>

    <style>
      body {
        margin: 0;
      }
      .example-container {
        overflow: hidden;
        position: absolute;
        width: 100%;
        height: 100%;
      }
      #example-scanning-overlay {
      }
      #example-scanning-overlay.hidden {
        display: none;
      }
    </style>
  </head>

  <body>
    <div class="example-container">
      <a-scene 
        mindar-image="imageTargetSrc: ../assets/kbbank-example/kbbank.mind; 
        showStats: true; 
        filterMinCF: 0.0001; filterBeta: 0.001; warmupTolerance: 5; missTolerance: 5;
        uiError:no; uiLoading:no; uiScanning: #bank_trans" 
        loading-screen="enabled: false; dotsColor: #ffbc50; backgroundColor: #60584c"
        embedded color-space="sRGB" 
        renderer="colorManagement: true, physicallyCorrectLights" 
        vr-mode-ui="enabled: false" 
        device-orientation-permission-ui="enabled: false"
        gesture-detector
      >
        <a-assets>
          <img id="tom" src=" https://stemkoski.github.io/AR-Examples/images/tiles.jpg">
          <img id="bank_trans" src="../../assets/images/kbBank_trans.png">
          <img id="clickGif" src="../../assets/images/click-hand-3d.gif">
          <img id="tooltipImg" src="../../assets/images/tooltip_ol35.png">
          
          <img id="card" src="../assets/card-example/card.png"/>
          <a-asset-item id="avatarModel" src="../assets/card-example/softmind/scene.gltf"></a-asset-item>
          
          <!-- <a-asset-item id="supporter" src="../../assets/models/ar_taewon.glb"></a-asset-item> -->
          <!-- <a-asset-item id="bibi" src="../../assets/models/bibi.glb"></a-asset-item> -->
          <a-asset-item id="rabbit" src="../../assets/models/rabbit.glb"></a-asset-item>
          <a-asset-item id="foodtrailer" src="../../assets/models/car/car.gltf"></a-asset-item>
        </a-assets>

        <a-camera position="0 0 0" look-controls="enabled: false">


          
        </a-camera>

        <a-entity mindar-image-target="targetIndex: 0">
         
          <!-- Debug Plane -->
          <a-entity
            geometry="primitive: plane"
            position="0 0 0" height="0.552" width="1" rotation="0 0 0" 
            material="opacity: 0.5; transparent: true">
          </a-entity>
    
          <a-entity light="type: hemisphere;  intensity: 0.75; color: 0xffffff; groundColor: 0x444444;" position="0, 20, 10"></a-entity>
          <a-entity light="type: directional; intensity: 0.75; color: 0xffffff;" color="0xffffff" position="0, 20, 10"></a-entity>
       
          <a-box position='1 0 0' material='src:#tom; opacity: 1; color : grey;  side: back' cloak></a-box>

          <a-entity position="0 -0.2 0.2" scale="0.15 0.15 0.15">
            <a-gltf-model src="#foodtrailer"></a-gltf-model>
            <a-gltf-model step-ctrl position="0 1.2 0" scale="0.85 0.85 0.85" src="#rabbit"></a-gltf-model>
            <!-- <a-gltf-model rotation="0 0 0" position="0 -0.2 0.2" scale="1 1 1" src="#bibi">
            <a-gltf-model rotation="0 0 0" position="0 -0.2 0.2" scale="1 1 1" src="#bibi"> -->
              
            <!-- <a-entity id="objects" scale="0.2 0.2 0.2" position="0 0 -1" shadow>
              <a-box position="-1 0.5 1" rotation="0 45 0" color="#4CC3D9"></a-box>
              <a-sphere position="0 1.25 -1" radius="1.25" color="#EF2D5E"></a-sphere>
              <a-cylinder position="1 0.75 1" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
            </a-entity>
          </a-entity> -->

          <!-- <a-entity id ='tooltipBox' class="cantap" scale="0.5 0.5 0.5" position="-0.105 0.018 0.002" slice9="color:red; width: 0.35; height: 0.4; left: 20; right: 43; top: 20; bottom: 43; src: #tooltipImg" ></a-entity>
          <a-entity id='clickCursor' position="0.25 -0.445 0.004" geometry="primitive:plane;width:0.16;height:0.16;" material="shader:gif; src:#clickGif; alphaTest:0.5"></a-entity> -->
        
          <!-- <a-plane color="blue" opaciy="0.5" position="0 0 0" height="0.552" width="1" rotation="0 0 0" ></a-plane> -->
          <!-- <a-plane src="#card" position="0 0 0" height="0.552" width="1" rotation="0 0 0"></a-plane> -->

        </a-entity>
      </a-scene>
    </div>
    <div id='subtitleBtn'  class='subtitle'>
      <div id="sub">미리 작성 서비스 - 입금 편</div>
    </div>
  </body>
</html>
